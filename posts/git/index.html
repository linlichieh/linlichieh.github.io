<!DOCTYPE html>
<html lang="en-us">
<title>Git | Jack&#39;s Note</title>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.58.3" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="canonical" href="/posts/git/">
<link rel="alternate" type="application/rss+xml" href="" title="Jack&#39;s Note">
<link rel="stylesheet" href="/css/theme.css">
<link rel="stylesheet" href="/css/classes.css">

<header class="dark">
  <h2><a href="/">Jack&#39;s Note</a></h2>
  <nav>
    
  </nav>
</header>

<article>
  <header>
    <h1><a href="/posts/git/">Git</a></h1>
    <p class="meta"><time datetime="2013-07-21T14:51:00Z">July 21, 2013</time></p>
  </header>
  

<h2 id="git-add"><code>git add</code></h2>

<h3 id="åŠ å…¥ç©ºçš„ç›®éŒ„">åŠ å…¥ç©ºçš„ç›®éŒ„</h3>

<p>å»ºç«‹ <code>gitkeep</code> æˆ– <code>.keep</code> åœ¨ç©ºçš„ç›®éŒ„</p>

<h2 id="git-branch"><code>git branch</code></h2>

<ul>
<li>éƒ½ä¸åŠ  : é¡¯ç¤º local branch</li>
<li><code>-r</code> : é¡¯ç¤º remote branch</li>
<li><code>-a</code> : é¡¯ç¤ºæ‰€æœ‰ branch (local + remote)</li>
<li><code>-v</code> : é¡¯ç¤ºbranchçš„è©³ç´°è³‡æ–™</li>
<li><code>--merged</code> : åˆ—å‡ºå·²ç¶“mergeçš„branch</li>
<li><code>--no-merged</code> : åˆ—å‡ºå°šæœªmergeçš„branch</li>
</ul>

<p>Rename branch</p>

<pre><code>git branch -m {old_name} {new_name}
</code></pre>

<p>Rename current branch</p>

<pre><code>git branch -m {new_name}
</code></pre>

<p>åˆªé™¤branch</p>

<pre><code>git branch -d developXD
git branch -D {branch name}
</code></pre>

<blockquote>
<p>git branch â€”no-merged</p>
</blockquote>

<h3 id="remove-outdated-local-branch">Remove outdated local branch</h3>

<ol>
<li><code>git checkout master</code></li>
<li><code>git branch â€”merged</code> or <code>git branch -vv</code></li>
</ol>

<blockquote>
<p>[origin/bug/more-phan-fixes: gone] [REFACTOR] Phan fixes</p>
</blockquote>

<h2 id="git-merge"><code>git merge</code></h2>

<p>è®“ commit log ç´€éŒ„æ‚¨æ˜¯é–‹åˆ†æ”¯å‡ºå»å† merge å›ä¾†çš„ã€‚</p>

<pre><code>git merge --no-ff develop
</code></pre>

<h3 id="undo-æŸä¸€å€‹-merged-ä½†æœª-push-çš„-branch">Undo æŸä¸€å€‹ merged ä½†æœª push çš„ branch</h3>

<p>æœ‰å¹¾ç¨®æ–¹æ³•</p>

<p>1) <code>git reset --hard HEAD~1</code></p>

<p>2) å…ˆç”¨ <code>git reflog</code> çœ‹ log, å†æŠŠ <code>HEAD@{1}</code> çš„ SHA1 è¨˜ä¸‹ä¾† (ä¸æ˜¯ <code>HEAD@{0}</code> çš„, å› ç‚ºé‚£æ˜¯ä½ ç›®å‰çš„é», æˆ‘å€‘è¦é‚„åŸåˆ°å‰ä¸€å‹•), å†åŸ·è¡Œ <code>git reset --hard {SHA1}</code></p>

<p>3) ç”¨ <code>git reset --hard {COMMIT_ID}</code> åˆ°æ—©ä¸€é»çš„é», ç„¶å€™å†æ…¢æ…¢è£œé½Šå¾Œä¾†çš„ commit</p>

<blockquote>
<p>å¦‚æœå°çµæœä¸å¤ªç¢ºå®šçš„è©±, å»ºè­°å…ˆç”¨ç›®å‰çš„ branch å»ºä¸€å€‹æ¸¬è©¦ç”¨çš„ branch ç·´ç¿’, ç¢ºå®šçµæœç¬¦åˆä½ è¦çš„å†åšåœ¨åŸæœ¬çš„ branch</p>
</blockquote>

<h2 id="git-rebase"><code>git rebase</code></h2>

<h3 id="rebase-åŸºæœ¬æ“ä½œæ¦‚å¿µ">rebase åŸºæœ¬æ“ä½œæ¦‚å¿µ</h3>

<p>é¡ä¼¼ merge, ä½†å°‡å…©å€‹ä¸åŒçš„ branch åˆä½µæˆåŒä¸€æ¢ç·šä¸”ä¸æœƒæœ‰ merge commit, tig çš„ç·šåœ–ä¹Ÿæœƒæ¯”è¼ƒæ¼‚äº®</p>

<p>1) rebase master</p>

<pre><code>git checkout feature
git rebase master
</code></pre>

<p>2) merge å› master</p>

<pre><code>git checkout master
git merge feature
</code></pre>

<h3 id="rebase-å…¶ä»–æŒ‡ä»¤">rebase å…¶ä»–æŒ‡ä»¤</h3>

<p>å¦‚æœæœ‰ç™¼ç”Ÿ conflict ä¸¦ä¿®å¥½å¾Œè¦ç¹¼çºŒ rebase</p>

<pre><code>git rebase --continue
</code></pre>

<h3 id="ä¿®æ”¹-past-commit-message">ä¿®æ”¹ past commit message</h3>

<pre><code>git rebase -i 637bd5ac^
</code></pre>

<p>Choose &ldquo;reword&rdquo; for the commit in question, then you&rsquo;ll have an opportunity to edit the message.</p>

<h3 id="conflict-standard-vs-diff3">conflict standard vs diff3</h3>

<p>Example 1</p>

<pre><code>[standerd]
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
GreenMessage.send(include_signature: true)      // HEAD
=======
BlueMessage.send(include_signature: false)      // target branch
&gt;&gt;&gt;&gt;&gt;&gt;&gt; merged-branch

[diff3]
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
GreenMessage.send(include_signature: true)      // HEAD
||||||| merged common ancestor
BlueMessage.send(include_signature: true)       // origin
=======
BlueMessage.send(include_signature: false)      // target branch
&gt;&gt;&gt;&gt;&gt;&gt;&gt; merged-branch

[Solution]
GreenMessage.send(include_signature: false)
</code></pre>

<p>Example 2</p>

<pre><code>[standard]
List Of Best Emojis
Rainbow ğŸŒˆ
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
Pizza ğŸ•
Unicorn ğŸ¦„
=======
Avocado ğŸ¥‘
&gt;&gt;&gt;&gt;&gt;&gt;&gt; topic-branch

[diff3]
List Of Best Emojis
Rainbow ğŸŒˆ
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD
Pizza ğŸ•
Unicorn ğŸ¦„
||||||| merged common ancestors
Pizza ğŸ•
=======
Avocado ğŸ¥‘
&gt;&gt;&gt;&gt;&gt;&gt;&gt; topic-branch

[solution]
Rainbow ğŸŒˆ
Pizza ğŸ•
Unicorn ğŸ¦„
Avocado ğŸ¥‘
</code></pre>

<p>ref: <a href="https://github.community/t5/Support-Protips/Git-Tips-Tricks-and-Hacks/ba-p/20651">https://github.community/t5/Support-Protips/Git-Tips-Tricks-and-Hacks/ba-p/20651</a></p>

<h3 id="edit-specific-commit">Edit specific commit</h3>

<ol>
<li><code>git rebase -i HEAD~3</code></li>
<li>Mark <code>e</code> for the commit that you want to change</li>
<li>Add or remove files</li>
<li><code>git commit â€”amend</code></li>
<li><code>git rebase â€”continue</code></li>
</ol>

<h3 id="rebase-a-specific-commit">rebase a specific commit</h3>

<ol>
<li>(edit files)</li>
<li>git add</li>
<li>git commit &ndash;fixup {Parent commit id}</li>
<li>git rebase -i HEAD~3  (assume we want to rebase on the second commit)</li>
<li>mark fixup on the commit that you want it to go (called commit C)</li>
<li>change the order of commit C to middle, because it will rebase onto the commit above it</li>
</ol>

<h2 id="git-merge-èˆ‡-git-rebase-å·®ç•°"><code>git merge èˆ‡ git rebase</code> å·®ç•°</h2>

<p>å…©è€…çµæœæ˜¯ä¸€æ¨£çš„ï¼Œç”¢ç”Ÿçš„ history ä¸åŒé» :</p>

<ul>
<li>git merge

<ul>
<li>ç•¶ dev merge master, dev æœƒåœ¨å¦ä¸€æ¢ç·šåš merge, æ‰€ä»¥ history æœƒçœ‹èµ·ä¾†æ¯”è¼ƒäº‚</li>
<li>conflict åªéœ€è¦è™•ç†ä¸€æ¬¡</li>
</ul></li>
<li>git rebase

<ul>
<li>ç•¶ dev rebase master, dev æœƒæ¥åœ¨ master æœ€å¾Œé¢, å³ä½¿ master æœ‰æ–°çš„ commit ä¹Ÿæœƒæ¥åœ¨æœ€å¾Œé¢, æ‰€ä»¥å®ƒçš„ history æœƒå¾ˆæ¼‚äº®, å°±åªæœ‰ä¸€æ¢</li>
<li>conflict éœ€è¦ä¸€å€‹ä¸€å€‹è™•ç†, å‡å¦‚ dev æœ‰å…©å€‹æ–°çš„ commit id, å°±éœ€è¦è™•ç†å…©æ¬¡</li>
<li>æˆ–ç”¨ <code>git pull --rebase</code> ä¹Ÿèƒ½é”åˆ°ä¸€æ¨£æ•ˆæœ</li>
</ul></li>
</ul>

<h2 id="git-checkout"><code>git checkout</code></h2>

<p>æ–°å¢ develop branch ä¸¦ä¸”åˆ‡æ›éå»</p>

<pre><code>$ git checkout -b develop
</code></pre>

<p>æ–°å¢ç”± develop åˆ†æ”¯å‡ºä¾†çš„ myfeature</p>

<pre><code>$ git checkout -b myfeature develop
</code></pre>

<p>ä½¿æª”æ¡ˆå›å¾©æˆæœ€è¿‘ä¸€æ¬¡commitçš„ç‹€æ…‹</p>

<pre><code>$ git checkout -- test.php
</code></pre>

<p>å¼·åˆ¶å›å¾©å·±åœ¨ add ç‹€æ…‹è¢«ä¿®æ”¹éçš„æª”æ¡ˆ, Untracked files å‰‡ä¸å—å½±éŸ¿</p>

<pre><code>git checkout -f
</code></pre>

<p>æ‰€æœ‰trackä¸­ä¸”ä¿®æ”¹éçš„æª”æ¡ˆå›å¾©æˆæœ€è¿‘ä¸€æ¬¡commitçš„ç‹€æ…‹</p>

<pre><code>git checkout .
</code></pre>

<p>åˆ‡åˆ°æŸä¸€å€‹ commit</p>

<pre><code>git checkout 62a4a5c9a6e8a323a1ea12ec54ac35da7ce1b662
</code></pre>

<p>å¾æŸå€‹ commit åˆ‡å›åŸæœ¬ branch</p>

<pre><code>git checkout -
ç›¸ç•¶æ–¼ git checkout master (ä¸ä¸€å®šæ˜¯ master å–æ±ºæ–¼åœ¨å“ªä¸€å€‹ branch)
</code></pre>

<h2 id="git-commit"><code>git commit</code></h2>

<ul>
<li><code>--amend</code> : ä¿®æ”¹æœ€å¾Œä¸€æ¬¡commit message</li>
</ul>

<h2 id="git-reset"><code>git reset</code></h2>

<ul>
<li><code>--soft</code> : å›å¾©åˆ°ä¹‹å‰çš„ç‹€æ…‹, ä½†ä¿®æ”¹éçš„æª”æ¡ˆä»ä¸è®Š</li>
<li><code>--hard</code> : å›å¾©åˆ°ä¹‹å‰çš„ç‹€æ…‹, <strong>ä½†ä¿®æ”¹éçš„æª”æ¡ˆä»æœƒä¿ç•™</strong></li>
</ul>

<p>å›å¾©åˆ°æŸä¸€å€‹ commit id</p>

<pre><code>git reset --hard {commit id}
</code></pre>

<p>å›å¾©ä¸Šä¸€å€‹ commit (åŒ…å« merge) ï¼Œä½†æ¢æ”¹çš„è³‡æ–™ä¸ä¿ç•™ï¼Œä¹Ÿå°±æ˜¯å›è¦†åˆ°ä¸Šä¸€å€‹ commit çš„åˆå§‹ç‹€æ…‹</p>

<pre><code>git reset HEAD^ --hard
</code></pre>

<p>å›å¾©ä¸Šä¸€å€‹ commit ä½†ä¿®æ”¹çš„è³‡æ–™ä¿ç•™ä¸‹ä¾†</p>

<pre><code>git reset HEAD^ --soft
</code></pre>

<p>å›å¾©åˆ° origin/master çš„ç‹€æ…‹ (ç•¶ merge æˆ–åšäº†ä»€éº¼å¾Œæ‚”çš„äº‹, åœ¨é‚„æ²’ push å‰éƒ½å¯ä»¥ä½¿ç”¨æ­¤æŒ‡ä»¤é‚„åŸåˆ° remote çš„æœ€æ–°ç‹€æ…‹)</p>

<pre><code>git reset --hard origin/master
</code></pre>

<h3 id="git-reset-head-hard-å¦‚ä½•æ•‘å›"><code>git reset HEAD^ --hard</code> å¦‚ä½•æ•‘å›</h3>

<p>æµç¨‹</p>

<pre><code>git reflog                  # æœƒæœ‰ä½ çš„æ¯æ¢ git æ“ä½œçš„ log, å·¦é‚Šæœ‰ commit id, è¨˜ä¸‹ä½ è¦å›å¾©çš„ commit id
git reset --hard bceefb7    # é€™æ¨£å°±å¯ä»¥æ•‘å›äº†
</code></pre>

<p>å¦‚æœä¸æ”¾å¿ƒå¯ä»¥è‡ªè¡Œæ¸¬è©¦</p>

<pre><code>$ git init
Initialized empty Git repository in .git/

$ echo &quot;testing reset&quot; &gt; file1
$ git add file1
$ git commit -m 'added file1'
Created initial commit 1a75c1d: added file1
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 file1

$ echo &quot;added new file&quot; &gt; file2
$ git add file2
$ git commit -m 'added file2'
Created commit f6e5064: added file2
 1 files changed, 1 insertions(+), 0 deletions(-)
 create mode 100644 file2

$ git reset --hard HEAD^
HEAD is now at 1a75c1d... added file1

$ cat file2
cat: file2: No such file or directory

$ git reflog
1a75c1d... HEAD@{0}: reset --hard HEAD^: updating HEAD
f6e5064... HEAD@{1}: commit: added file2

$ git reset --hard f6e5064
HEAD is now at f6e5064... added file2

$ cat file2
added new file
</code></pre>

<p>ref: <a href="https://stackoverflow.com/questions/5473/how-can-i-undo-git-reset-hard-head1">stackoverflow</a></p>

<h2 id="git-revert"><code>git revert</code></h2>

<blockquote>
<p>èˆ‡ reset ä¸åŒçš„äº‹ä»–å›å¾©æ˜¯æœƒæœ‰ç´€éŒ„çš„ï¼Œlog æœƒç–Šä¸‹å»ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸å°å¿ƒ push äº†ä¸€å€‹ commit åˆ° masterï¼Œä½ æƒ³å›å¾©ï¼Œç”¨ revert æœƒæ¯” reset ç°¡å–®æ“ä½œ</p>
</blockquote>

<p>å›å¾©ä¸Šä¸€å€‹ commit</p>

<pre><code>git revert HEAD
</code></pre>

<p>å›å¾©åˆ°æŸä¸€å€‹ commit id</p>

<pre><code>git revert {commit_id}
</code></pre>

<p>å°‡æŸä¸€å€‹å·²ç¶“ commit/merge çš„ commit_id å›å¾©</p>

<pre><code>git revert --strategy resolve 305a9bd07ae40c585ac2f2761dea4374e7fee93e
</code></pre>

<blockquote>
<p>å›å¾©å¾Œå®ƒæœƒæœ‰ä¸€å€‹ commit ç´€éŒ„, å¦‚æœæƒ³å†æŠŠå®ƒåŠ å›ä¾†, ç„¡æ³•ç”¨ merge (<code>Already up-to-date.</code>), ä½†å¯ä»¥ç”¨ cherry-pick åŠ å›ä¾†</p>
</blockquote>

<h2 id="git-cherry-pick"><code>git cherry-pick</code></h2>

<ul>
<li><code>-x</code>: Preserve original commit id</li>
</ul>

<p>å°‡æŸä¸€å€‹ branch çš„<strong>æŸä¸€å€‹</strong> commit çš„è®Šå‹• merge åˆ°å¦ä¸€æ¢ branch, å‡å¦‚ develop åªæƒ³è¦ merge feature çš„æŸä¸€å€‹ commit, å‰‡éœ€è¦å…ˆæŠŠ feature çš„é‚£æ¢ commit id è¨˜ä¸‹ä¾†, å†åˆ‡åˆ° develop åš cherry-pick</p>

<pre><code>git checkout develop
git cherry-pick f08515bc579a06dd9c8bd7f2dfc30ad4d5a73646
</code></pre>

<h3 id="git-rerere">git rerere</h3>

<p>It is used for cherry-pick
Especially for fixing conflict when cherry-pick latest commits from develop branch against an old tag commit
Basically, it records the change you made and apply the fixes to next conflicts</p>

<p>See more: <a href="https://git-scm.com/docs/git-rerere">https://git-scm.com/docs/git-rerere</a></p>

<h2 id="git-show"><code>git show</code></h2>

<p>æŸ¥çœ‹æŸä¸€å€‹ tag çš„è®Šå‹•</p>

<pre><code>git show v1.0.0
</code></pre>

<p>æŸ¥çœ‹ commit id ä¿®æ”¹å…§å®¹</p>

<pre><code>git show 41e24b9349acc9bbc1b8853284866f498892ce4b
</code></pre>

<h2 id="git-log"><code>git log</code></h2>

<ul>
<li><code>--stat</code> : åˆ—å‡ºæœ‰å¢æ¸›çš„æª”æ¡ˆ</li>
<li><code>--oneline</code> : ç²¾ç°¡çš„logï¼Œæ¯ä¸€æ¬¡çš„commitè³‡è¨Šç‚ºä¸€è¡Œï¼Œåªé¡¯ç¤ºå‰7ç¢¼çš„SHA1åŠmessage</li>
</ul>

<p>æœ€è¿‘ä¸€æ¬¡ commit æ”¹éçš„æª”æ¡ˆ</p>

<pre><code>git log -n 1 --stat
</code></pre>

<p>æœ€è¿‘ä¸€æ¬¡ commit çš„æ›´æ”¹ç´°ç¯€</p>

<pre><code>git log -n 1 -p
</code></pre>

<h2 id="git-reflog"><code>git reflog</code></h2>

<p>é¡¯ç¤º git çš„æ¯å€‹ log (åŒ…æ‹¬æ“ä½œ command åŠ commit å…§å®¹ç­‰ç­‰)</p>

<h2 id="git-diff"><code>git diff</code></h2>

<ul>
<li>default or <code>--</code> : é staged è£¡çš„èˆ‡ç›®å‰ç‰ˆæœ¬çš„å·®ç•°</li>
<li><code>--staged</code> or <code>--cached</code>(1.6ç‰ˆå‰) : stage è£¡çš„èˆ‡ç›®å‰ç‰ˆæœ¬çš„å·®ç•°</li>
<li><code>HEAD^</code> : æ¯”è¼ƒä¸Šä¸€å€‹commitçš„å·®ç•°</li>
<li><code>branch</code> : æ¯”è¼ƒbranchçš„å·®ç•°</li>
<li><code>--stat</code> : æŸ¥çœ‹å·®ç•°çš„æ¦‚è¦ (é¡¯ç¤ºä¸€å † <code>+</code>, <code>-</code>)</li>
<li><code>sha1..sha1</code> : æ¯”è¼ƒå…©å€‹commitå·®ç•°</li>
</ul>

<p>æœªåŠ å…¥ stage æ™‚ç›´æ¥ä¸‹ :</p>

<pre><code>git diff qq.php
</code></pre>

<p>å·²åŠ å…¥ stage è¦ä¸‹ :</p>

<pre><code>git diff HEAD qq.php
</code></pre>

<p>æ¯”è¼ƒå…©å€‹ branch :</p>

<pre><code>git diff develop master
</code></pre>

<h2 id="git-diff-tree"><code>git diff-tree</code></h2>

<p>List modified files on a specific commid id</p>

<pre><code>git diff-tree --no-commit-id --name-only -r cf5f610b67ce52c8d6e39a526e6405675f430bd8
</code></pre>

<h2 id="git-config"><code>git config</code></h2>

<ul>
<li><code>--list</code> : æŸ¥çœ‹ config å…§å®¹ï¼Œä¹Ÿå¯ä»¥ç”¨å¦ç¨®æ–¹å¼çœ‹ <code>cat ~/.gitconfig</code></li>
<li><code>--unset</code> : reset æŸå€‹ config. e.g. <code>git config --global --unset {key}</code></li>
</ul>

<p>å°‡ diff ä»¥ vimdiff æ–¹å¼é¡¯ç¤º</p>

<pre><code>git config --global diff.tool vimdiff       # ä½¿ç”¨ difftool å°±å¯ä»¥å•Ÿå‹• vimdiff
git config --global difftool.prompt false   # åŸ·è¡Œä¸Šé¢æŒ‡ä»¤, æœƒå•ä½ æ˜¯å¦åŸ·è¡Œ, å¾ˆéº»ç…©æ‰€ä»¥é—œæ‰å®ƒ
git config --global alias.d difftool        # ä½¿ç”¨ `git d` ç›¸ç•¶æ–¼ `git difftool`
</code></pre>

<h2 id="git-rm"><code>git rm</code></h2>

<ul>
<li><code>--cache filename.php</code> : å°‡å·²è¢« git è¿½è¹¤çš„æª”æ¡ˆå–æ¶ˆè¿½è¹¤, æ”¾å¿ƒ! å®ƒä¸¦ä¸æœƒå°‡æª”æ¡ˆåˆªé™¤, è€Œå°‡ç‹€æ…‹è®Šæˆ Untracked</li>
<li><code>--cached filename.php</code> : çµæœä¼¼ä¹å’Œ <code>--cache</code> ä¸€æ¨£</li>
</ul>

<h2 id="git-push"><code>git push</code></h2>

<p>å¼·åˆ¶ push, ä¹‹å‰çš„commit ç´€éŒ„æœƒä¸è¦‹,åªæœƒæœ‰ç›®å‰é€™å€‹branchçš„commit ç´€éŒ„</p>

<pre><code>git push origin master -f
</code></pre>

<p>when you do need to do a forced push but still ensure you donâ€™t overwrite otherâ€™s work</p>

<pre><code>git push --force-with-lease
</code></pre>

<p>å»ºç«‹é ç«¯ branch</p>

<pre><code>git branch dev          // å…ˆå»ºç«‹ local branch
git push origin dev:refs/heads/dev
</code></pre>

<h2 id="git-pull"><code>git pull</code></h2>

<p><code>git pull --rebase</code> ç­‰æ–¼ä»¥ä¸‹å…©æ­¥</p>

<pre><code>git fetch
git merge origin dev
</code></pre>

<p><code>git pull â€“rebase</code> æœƒä½¿ merge commit ä¸è¦‹, æ”¹ç”¨ :</p>

<pre><code>git fetch origin
git rebase -p origin/develop
</code></pre>

<p>åœ¨ç›®å‰ branch ä¸‹ <code>git pull origin {branch_name}</code>: ä»£è¡¨å°‡ {branch_name} (remote branch) merge åˆ°ç›®å‰é€™å€‹ branch</p>

<h2 id="git-stash"><code>git stash</code></h2>

<p>æ”¾é€²æš«å­˜</p>

<pre><code>git stash
</code></pre>

<p>æŸ¥çœ‹æš«å­˜</p>

<pre><code>git stash list
</code></pre>

<p>å–å‡ºæš«å­˜</p>

<pre><code>git stash pop
</code></pre>

<p>æ¸…ç©ºæš«å­˜</p>

<pre><code>git stash clear
</code></pre>

<p>å¦‚æœæš«å­˜æœ‰å¤šå€‹ï¼Œå¯ä»¥æŒ‡å®šè¦é‚„åŸå“ªå€‹commit ID</p>

<pre><code>git stash [commit ID]
</code></pre>

<p>stash specific files</p>

<pre><code>git add a1.go                   // files that You don't want to stash
git stash save --keep-index     // this command will stash the rest of files
</code></pre>

<h2 id="git-tag"><code>git tag</code></h2>

<p>æŸ¥çœ‹ç›®å‰ tag</p>

<pre><code>git tag
v1.0.0
</code></pre>

<p>æ–°å¢ tag</p>

<pre><code>git tag -a v1.4 -m &quot;my version 1.4&quot;
git push --tags
</code></pre>

<h2 id="git-fetch"><code>git fetch</code></h2>

<p>æ›´æ–° <code>git branch -r</code> çš„åå–®</p>

<pre><code>git fetch
</code></pre>

<p>æ›´æ–° remote branch list (é ç«¯å·²åˆªé™¤çš„ branch, æœ¬æ©Ÿ branch ä¸æœƒåˆªé™¤ï¼Œåªæœƒæ›´æ–°æ–°å¢çš„ remote branch)</p>

<pre><code>git fetch --all
</code></pre>

<p>ç•¶è¦ merge é ç«¯ branch å‰ï¼Œå…ˆçœ‹ä¿®æ”¹äº†ä»€éº¼ï¼Œå†merge</p>

<pre><code>git fetch origin dev
tig
git merge origin dev
</code></pre>

<p>clean up local cache of remote branch</p>

<pre><code>git fetch â€”prune
</code></pre>

<h2 id="git-remote"><code>git remote</code></h2>

<p>(å»ºè­°) æ›´æ–° remote branch list (é ç«¯å·²åˆªé™¤çš„ branch, æœ¬æ©Ÿ branch æœƒå¹«ä½ åˆªé™¤ï¼ŒåŒæ™‚ä¹Ÿæœƒæ›´æ–°æ–°å¢çš„ remote branch)</p>

<pre><code>git remote update origin --prune
</code></pre>

<p>or</p>

<pre><code>git remote prune origin
</code></pre>

<p>æ–°å¢é ç«¯ repo</p>

<pre><code>git remote add origin https://git.heroku.com/my-app.git
</code></pre>

<p>æŸ¥çœ‹remoteæœ‰å“ªäº›branch</p>

<pre><code>git branch -r
git remote show origin
</code></pre>

<blockquote>
<p>æœ‰æ™‚å€™ç”¨ <code>git branch -r</code>, æŸ¥çœ‹ remote branch æ™‚, ç™¼ç¾æ˜æ˜åˆªæ‰çš„ branch ç‚ºä½•é‚„åœ¨?  ä½¿ç”¨ <code>git remote prune origin</code> ä¾†æ›´æ–°æš«å­˜æª”, å°±å¯ä»¥å–å¾—æœ€æ–°çš„ remote branch list</p>
</blockquote>

<p>git pull branch from forked repo</p>

<pre><code>cd into/cloned/fork-repo
git remote add upstream git://github.com/ORIGINAL-DEV-USERNAME/REPO-YOU-FORKED-FROM.git
git fetch upstream
git pull upstream master
</code></pre>

<p>show remote origin list</p>

<pre><code>git remote -v
</code></pre>

<h2 id="git-rev-parse"><code>git rev-parse</code></h2>

<p>latest commit hash</p>

<pre><code>git rev-parse HEAD
</code></pre>

<h2 id="git-clean"><code>git clean</code></h2>

<p>Remove untracked file and directory.</p>

<pre><code>git clean -df
</code></pre>

<h2 id="remote-branch">remote branch</h2>

<p>create</p>

<pre><code>git push origin develop:refs/heads/branch_to_create
git fetch origin
git branch --track branch_to_create origin/branch_to_create
git checkout branch_to_create
</code></pre>

<p>track</p>

<pre><code>git fetch origin
git branch --track branch_to_track origin/branch_to_track
</code></pre>

<p>delete remote branch</p>

<pre><code>git push origin --delete &lt;branch_name&gt;
</code></pre>

<p>rename</p>

<pre><code># å¦‚æœ branch å·²å­˜åœ¨è¦å…ˆ remove branch
git push origin --delete &lt;branch_name&gt;


git push origin develop:refs/heads/branch_to_rename            # é€™æ­¥åªæ˜¯å°‡é ç«¯ develop copy æˆ branch_to_rename, develop é‚„åœ¨
git fetch origin
git branch --track branch_to_rename origin/branch_to_rename
git checkout branch_to_rename
git push origin :refs/heads/develop
git branch -D develop
</code></pre>

<p>publish</p>

<pre><code>git push origin branch_to_publish:refs/heads/branch_to_publish
git fetch origin
git branch -u origin/branch_to_publish branch_to_publish
git checkout branch_to_publish
</code></pre>

<h2 id="å…¶ä»–å¸¸ç”¨æŒ‡ä»¤">å…¶ä»–å¸¸ç”¨æŒ‡ä»¤</h2>

<ul>
<li><code>git blame test.qq</code> : test.phpé€™ä»½æª”æ¡ˆé¡¯ç¤ºæ¯è¡Œçš„ç·¨è¼¯è€…</li>
<li><code>git branch -r</code> : æŸ¥çœ‹é ç«¯ branch</li>
<li><code>git add -u</code> : è‡ªå‹•å°‡æ‰€æœ‰çš„æª”æ¡ˆéƒ½æ”¾åˆ° stage ç­‰å¾… commit, è€Œé‡è¦çš„æ˜¯è¢«åˆªé™¤éçš„æª”æ¡ˆä¹Ÿæœƒä¸€èµ·æ”¾é€²å», ä¸éœ€ç”¨ <code>git rm</code> ä¸€å€‹ä¸€å€‹é»è¢«åˆªé™¤éçš„æª”æ¡ˆ, å¾ˆæ–¹ä¾¿!</li>
<li><code>tig</code> : é¡¯ç¤ºæ¨¹ç‹€</li>
<li><code>gitk</code> : é¡¯ç¤ºæ¨¹ç‹€ (GUI version)</li>
</ul>

<blockquote>
<p><code>prune</code> æ˜¯åœ¨ <code>grb delete</code> å¾Œæ‰éœ€è¦åšçš„</p>
</blockquote>

<h2 id="æ¸›å°‘-merge-branch-master-of-xxx-é€™ç¨®å¤šé¤˜ç¯€é»">æ¸›å°‘ <code>Merge branch 'master' of XXX</code> é€™ç¨®å¤šé¤˜ç¯€é»</h2>

<p>åŠ ä¸Š<code>--rebase</code> :</p>

<pre><code>git pull --rebase
</code></pre>

<p>è‹¥åœ¨ä¸åŒçš„ <code>branch</code> è¦æ¥é ç«¯çš„ <code>master</code> æ›´æ–°çš„è©±ï¼ŒåŸ·è¡Œï¼š</p>

<pre><code>git pull --rebase origin master
</code></pre>

<blockquote>
<p>ä¸éä½¿ç”¨<code>--rebase</code>æ˜¯åœ¨æ²’æœ‰<code>conflict</code>çš„æƒ…æ³ä¸‹ä½¿ç”¨ï¼Œå®ƒä¸¦ä¸æœƒåƒ<code>git merge</code>é‚£æ¨£è°æ˜åœ°è™•ç†<code>conflict</code>ï¼ŒåŸç†æ˜¯<code>rebase</code>ä¸¦æ²’æœ‰åƒè€ƒ<code>parent</code>ç¯€é»åšåŒæ­¥</p>
</blockquote>

<h3 id="é‡åˆ°-conflict-ä½œæ³•">é‡åˆ°<code>conflict</code>ä½œæ³•</h3>

<p>å¦‚æœç”¢ç”Ÿäº†è¡çªå›å¾© <code>pull</code> å‰çš„ç‹€æ…‹ :</p>

<pre><code>git rebase --abort
</code></pre>

<p>ç„¶å€™åˆä½µcodeèˆ‡ <code>master</code> åŒæ­¥ :</p>

<pre><code>git merge origin master
</code></pre>

<p>ä½†é€™æ¨£å°±é‚„æ˜¯æœƒç”¢ç”Ÿ <code>Merge branch 'master' of XXX</code> ç¯€é»</p>

<h2 id="æ›´æ–°å¾åˆ¥äºº-fork-éä¾†çš„-repository">æ›´æ–°å¾åˆ¥äºº fork éä¾†çš„ repository</h2>

<p><img src="/images/posts/git.png" alt="IMAG1680.jpg" /></p>

<pre><code>git remote add upstream git@...(ç•¥)...
git remote -v
git pull upstream master
</code></pre>

<p>è¨» :</p>

<p><code>git pull upstream master</code> ä¹Ÿç­‰æ–¼</p>

<pre><code>git fetch upstream
git merge upstream/master
</code></pre>

<h2 id="fixup-and-squash">Fixup and Squash</h2>

<p>Fixup a specific commit id</p>

<pre><code>git commit --fixup fb2f677
</code></pre>

<p>squash commits into one</p>

<pre><code>git rebase -i HEAD~2
git rebase -i --autosquash ac5db87   (previous commit id)
</code></pre>

<blockquote>
<p>Mark <code>squash</code> or <code>fixup</code> at the beginning of commits</p>
</blockquote>

<p>ref</p>

<ul>
<li><a href="https://www.devroom.io/2011/07/05/git-squash-your-latests-commits-into-one/">https://www.devroom.io/2011/07/05/git-squash-your-latests-commits-into-one/</a></li>
<li><a href="https://fle.github.io/git-tip-keep-your-branch-clean-with-fixup-and-autosquash.html">fixup and squash</a></li>
</ul>

<h2 id="trouble-shooting">Trouble shooting</h2>

<h3 id="gitignore-not-working">.gitignore not working</h3>

<pre><code>git rm -r --cached .
git add .
git commit -m &quot;.gitignore is now working&quot;
</code></pre>

<h3 id="git-clone-error">git clone error</h3>

<pre><code>$ git clone https://github.com/xxx/ccc.git
Cloning into 'conf'...
error: Problem with the SSL CA cert (path? access rights?) while accessing https://github.com/xxx/ccc.git/info/refs
fatal: HTTP request failed
</code></pre>

<p>è§£æ±º :</p>

<pre><code>git config --global http.sslVerify false
</code></pre>

<h2 id="contributing-pull-request">contributing (pull request)</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (git checkout -b my-new-feature)</li>
<li>Commit your changes (git commit -am &lsquo;Add some feature&rsquo;)</li>
<li>Push to the branch (git push origin my-new-feature)</li>
<li>Create new Pull Request</li>
</ol>

<h2 id="å¦‚ä½•å¯«-commit-messages">å¦‚ä½•å¯« commit messages</h2>

<p>1) Subject èˆ‡ body ä»¥ä¸€è¡Œç©ºæ ¼åˆ†é–‹</p>

<pre><code>Derezz the master control program

MCP turned out to be evil and had become intent on world domination.
This commit throws Tron's disc into MCP (causing its deresolution)
and turns it back into a chess game.
</code></pre>

<blockquote>
<p>é€™æ¨£<code>git log --oneline</code> or <code>git shortlog</code>å°±å¯ä»¥åªé¡¯ç¤ºä¸»æ—¨</p>
</blockquote>

<p>2) Subject ä¸è¦è¶…é 50 å­—å…ƒ, é–‹é ­è¦å¤§å¯«, çµå°¾ä¸éœ€å¥è™Ÿ</p>

<p>3) ç°¡æ˜çš„ subject</p>

<pre><code>Refactor subsystem X for readability
Update getting started documentation
Remove deprecated methods
Release version 1.0.0
ä¹Ÿå¯ä»¥ç”¨ä»¥ä¸‹çš„å¥å­
If applied, this commit will refactor subsystem X for readability
If applied, this commit will update getting started documentation
If applied, this commit will remove deprecated methods
If applied, this commit will release version 1.0.0
If applied, this commit will merge pull request #123 from user/branch
</code></pre>

<p>4) Body åœ¨ 72 å­—å…ƒæ›è¡Œï¼Œç¢ºä¿åŠ ä¸Š git æœ¬èº«çš„ indent æ¯è¡Œå¯ä»¥åœ¨ 80 å­—å…ƒå…§</p>

<p>5) Body ç”¨ä¾†è§£é‡‹ what changed and whyï¼Œä¸»è§’ä¸æ˜¯ how</p>

<pre><code>Simplify serialize.h's exception handling

Remove the 'state' and 'exceptmask' from serialize.h's stream
implementations, as well as related methods.

As exceptmask always included 'failbit', and setstate was always
called with bits = failbit, all it did was immediately raise an
exception. Get rid of those variables, and replace the setstate
with direct exception throwing (which also removes some dead
code).

As a result, good() is never reached after a failure (there are
only 2 calls, one of which is in tests), and can just be replaced
by !eof().

fail(), clear(n) and exceptions() are just never called. Delete
them.
</code></pre>

<p>ref : <a href="http://chris.beams.io/posts/git-commit/">http://chris.beams.io/posts/git-commit/</a></p>

<h3 id="å…¶ä»–åƒè€ƒ-message">å…¶ä»–åƒè€ƒ message</h3>

<pre><code>Other bug fixes
    * Fixed an issue that of forcibly terminating while running Peel remoate application.
    * The latest Android security patch has been applied.
    * Device security has been further enhanced.
Fixed the XXX bug in YYY
</code></pre>

<h3 id="è©²ç”¨-present-tense-é‚„æ˜¯-past-tense">è©²ç”¨ present tense é‚„æ˜¯ past tense?</h3>

<p>å…©é‚Šéƒ½æœ‰æ”¯æŒè€…, git æœ¬èº«çš„å°ˆæ¡ˆçš„ message æ˜¯ç”¨ present tense,
ä½†æœ‰äººè¦ºå¾— present tense æ˜¯å‘Šè¨´åˆ¥äººå°‡è¦åšä»€éº¼, ç”¨ past tense æ¯”è¼ƒæ­£ç¢º,
ä½†æŸ¥äº†ä¸€è¼ªä¸‹ä¾†, æ”¯æŒ present tense çš„äººæ¯”è¼ƒå¤šä¸€äº›,
æˆ‘çš„å»ºè­°æ˜¯å–æ±ºæ–¼åœ˜éšŠçš„ style, ç•¶å¤šæ•¸äººç”¨å“ªå€‹å°±ç”¨å“ªå€‹</p>

<h3 id="commit-çš„åˆ†é¡">commit çš„åˆ†é¡</h3>

<ul>
<li>feat: (new feature for the user, not a new feature for build script)</li>
<li>fix: (bug fix for the user, not a fix to a build script)</li>
<li>docs: (changes to the documentation)</li>
<li>style: (formatting, missing semi colons, etc; no production code change)</li>
<li>refactor: (refactoring production code, eg. renaming a variable)</li>
<li>test: (adding missing tests, refactoring tests; no production code change)</li>
<li>chore: (updating grunt tasks etc; no production code change)</li>
</ul>

<p>Categories</p>

<ul>
<li>[INITIAL] â€” for the initial commit and set up</li>
<li>[ADD] â€” broad category for code thatâ€™s added</li>
<li>[UPDATE] â€” for small updates</li>
<li>[REFACTOR] â€” refactored code</li>
<li>[FIX] â€” fixes (e.g. typos, linter rules, broken links/imports, etc.)</li>
<li>[TESTS] â€” if you write them :)</li>
<li>[STYLES] â€” style related commits</li>
<li>[BUILD] â€” during the build process</li>
<li>[PRODUCTION] â€” production related</li>
<li>[WIP] â€” work in progress</li>

<li><p>[REMOVE] â€” when removing files or old, unnecessary code</p></li>

<li><p>ref: <a href="https://gist.github.com/joshbuchea/6f47e86d2510bce28f8e7f42ae84c716">https://gist.github.com/joshbuchea/6f47e86d2510bce28f8e7f42ae84c716</a></p></li>

<li><p>ref: <a href="https://medium.com/@rcwestlake/write-categorized-git-commit-messages-c9f953ea6040">https://medium.com/@rcwestlake/write-categorized-git-commit-messages-c9f953ea6040</a></p></li>
</ul>

<h2 id="tig">tig</h2>

<p>åªé¡¯ç¤º merge ç·šåœ–</p>

<pre><code>tig --merges
</code></pre>

<p>use Gitâ€™s default commit order</p>

<pre><code>tig --topo-order
</code></pre>

</article>



</html>
